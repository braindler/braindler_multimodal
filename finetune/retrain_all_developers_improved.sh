#!/bin/bash
"""
–ü–æ–ª–Ω–æ–µ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Å—Ñ–µ—Ä —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (073-078) —Å —É–ª—É—á—à–µ–Ω–Ω—ã–º –¥–∞—Ç–∞—Å–µ—Ç–æ–º
–Ω–∞ –æ—Å–Ω–æ–≤–µ nativemind/mozgach_alpaca_gift

¬© 2025 NativeMind - NativeMindNONC License
"""

set -e

echo "=================================================================================="
echo "üöÄ –ü–û–õ–ù–û–ï –ü–ï–†–ï–û–ë–£–ß–ï–ù–ò–ï –°–§–ï–† –†–ê–ó–†–ê–ë–û–¢–ö–ò –° –£–õ–£–ß–®–ï–ù–ù–´–ú –î–ê–¢–ê–°–ï–¢–û–ú"
echo "=================================================================================="
echo ""
echo "üì¶ –ë–∞–∑–æ–≤–∞—è –º–æ–¥–µ–ª—å: nativemind/shridhar_8k_multimodal"
echo "üìö –£–ª—É—á—à–µ–Ω–Ω—ã–π –¥–∞—Ç–∞—Å–µ—Ç: mozgach_alpaca_gift + —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è"
echo "üéØ –°—Ñ–µ—Ä—ã: 073-078 (DEVELOPER, CODE_REVIEWER, ARCHITECT, DEVOPS, QA_TESTER, TECH_WRITER)"
echo ""

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
echo "üîß –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è..."
source ../venv/bin/activate
echo "‚úÖ –û–∫—Ä—É–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ"
echo ""

# –°–æ–∑–¥–∞–Ω–∏–µ —É–ª—É—á—à–µ–Ω–Ω–æ–≥–æ –¥–∞—Ç–∞—Å–µ—Ç–∞
echo "üìö –°–æ–∑–¥–∞–Ω–∏–µ —É–ª—É—á—à–µ–Ω–Ω–æ–≥–æ –¥–∞—Ç–∞—Å–µ—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ mozgach_alpaca_gift..."
python create_high_quality_developers_from_mozgach.py

if [ $? -ne 0 ]; then
    echo "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –¥–∞—Ç–∞—Å–µ—Ç–∞!"
    exit 1
fi

echo "‚úÖ –£–ª—É—á—à–µ–Ω–Ω—ã–π –¥–∞—Ç–∞—Å–µ—Ç —Å–æ–∑–¥–∞–Ω"
echo ""

# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π
echo "üìÅ –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π..."
mkdir -p ../models_improved
echo "‚úÖ –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å–æ–∑–¥–∞–Ω–∞"
echo ""

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è –æ–¥–Ω–æ–π —Å—Ñ–µ—Ä—ã
retrain_sphere() {
    local sphere=$1
    local sphere_name=$2
    
    echo "=================================================================================="
    echo "üöÄ –ü–ï–†–ï–û–ë–£–ß–ï–ù–ò–ï –°–§–ï–†–´ $sphere: $sphere_name"
    echo "=================================================================================="
    echo ""
    
    # –ó–∞–ø—É—Å–∫ —É–ª—É—á—à–µ–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è
    python finetune_developers_improved.py \
        --sphere $sphere \
        --dataset ../datasets/developers_high_quality_from_mozgach.jsonl \
        --output ../models_improved \
        --base-model nativemind/shridhar_8k_multimodal \
        --epochs 5 \
        --batch-size 4 \
        --learning-rate 1e-4
    
    if [ $? -eq 0 ]; then
        echo ""
        echo "‚úÖ –°—Ñ–µ—Ä–∞ $sphere ($sphere_name) —É—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∞!"
        echo ""
    else
        echo ""
        echo "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–∏ —Å—Ñ–µ—Ä—ã $sphere ($sphere_name)"
        echo ""
        exit 1
    fi
}

# –ü–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Å—Ñ–µ—Ä
echo "üöÄ –ù–∞—á–∏–Ω–∞–µ–º –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Å—Ñ–µ—Ä —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏..."
echo ""

# –°—Ñ–µ—Ä–∞ 073: DEVELOPER
retrain_sphere "073" "DEVELOPER"

# –°—Ñ–µ—Ä–∞ 074: CODE_REVIEWER
retrain_sphere "074" "CODE_REVIEWER"

# –°—Ñ–µ—Ä–∞ 075: ARCHITECT
retrain_sphere "075" "ARCHITECT"

# –°—Ñ–µ—Ä–∞ 076: DEVOPS
retrain_sphere "076" "DEVOPS"

# –°—Ñ–µ—Ä–∞ 077: QA_TESTER
retrain_sphere "077" "QA_TESTER"

# –°—Ñ–µ—Ä–∞ 078: TECH_WRITER
retrain_sphere "078" "TECH_WRITER"

echo "=================================================================================="
echo "üéâ –í–°–ï –°–§–ï–†–´ –†–ê–ó–†–ê–ë–û–¢–ö–ò –£–°–ü–ï–®–ù–û –ü–ï–†–ï–û–ë–£–ß–ï–ù–´!"
echo "=================================================================================="
echo ""
echo "üìÅ –£–ª—É—á—à–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤: ../models_improved/"
echo "   - sphere_073_improved/"
echo "   - sphere_074_improved/"
echo "   - sphere_075_improved/"
echo "   - sphere_076_improved/"
echo "   - sphere_077_improved/"
echo "   - sphere_078_improved/"
echo ""
echo "üß™ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —É–ª—É—á—à–µ–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π..."
echo ""

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–ª—É—á—à–µ–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π
python test_developer_models.py --models-dir ../models_improved

echo ""
echo "üôè –°–ª—É–∂–µ–Ω–∏–µ –∏—Å—Ç–∏–Ω–µ —á–µ—Ä–µ–∑ –æ–±—É—á–µ–Ω–∏–µ AI –∑–∞–≤–µ—Ä—à–µ–Ω–æ!"
echo ""
